# JPEGResampler

JPEGResempler - сервис для ресэмплинга изображений в формате JPEG. Этот сервис позволяет загрузить изображение, и оно будет обработано и сохранено в нужном формате. Также поддерживается кэширование изображений

## Требования

- GO 1.20 или выше
- установленный Docker

## Установка

1. **Склонируйте репозиторий**

```bash
    git clone https://github.com/MrUndercat/JPEGResamplerTest.git
```

2. **Перейдите в папку с проектом**

```bash
    cd cmd\app
```

3. **Соберите проект**

```bash
    go build
```

4. **Запустите проект**

```bash
    go run main.go
```
## Допустимые флаги: 

`-_path-orig_` - путь к оригинальному изображению,

`_-path-res_` - путь к результирующему изображению
                    
`_-width_` и `-height` - длина и ширина итогового изображения (не могут быть заданы неодинаково)

Сервис будет запущен на порту 8085

5. **При необходимости запуска в изолированной среде, проверьте конфигурацию Dockerfile и запустите контейнер**

```bash
    docker build -t jpeg-resampler .
    docker run -p 8085:8085 jpeg-resampler
```

## API
По умолчанию, сервис доступен на эндпоинте 
```
localhost:8085/images
```

Сервис принимает Post-запросы с изображением в формате base64.
```json
{
"image": "base64_encoded_image_string"
}
```

Пример ответа в формате JSON (поле `cached` указывает, было ли изображение взято из кэша):
```json
{
"code": 200,
"body": {"time":"<time-processing-ms>", "cached":"<true|false>"}
}
```
```json
{
"code": 200,
"body": {"error":"<error-message>"}
}
```  



